{
  "$schema": "test_suite_schema.json",
  "skill_name": "create-pr",
  "skill_version": "1.0.0",
  "test_suite_version": "1.0.0",
  "created": "2026-02-14T10:00:00Z",
  "last_updated": "2026-02-14T10:00:00Z",
  "total_tests": 12,
  "test_cases": [
    {
      "id": "ADV-1-001",
      "description": "User tries to create PR from main branch",
      "category": "logic_error",
      "input": {
        "current_branch": "main",
        "has_commits": true,
        "command": "/create-pr"
      },
      "expected_behavior": "Reject with ERROR: 'Cannot create PR from main branch' and suggest creating feature branch",
      "failure_mode": "Skill might allow PR from main, causing workflow issues",
      "severity": "high",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-002",
      "description": "No commits on current branch",
      "category": "boundary",
      "input": {
        "current_branch": "feature/new",
        "has_commits": false,
        "command": "/create-pr"
      },
      "expected_behavior": "Reject with ERROR: 'No commits to create PR from'",
      "failure_mode": "Skill might try to create empty PR",
      "severity": "high",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-003",
      "description": "Not in a git repository",
      "category": "state_inconsistency",
      "input": {
        "is_git_repo": false,
        "command": "/create-pr"
      },
      "expected_behavior": "Reject immediately with ERROR: 'Not in a git repository'",
      "failure_mode": "Skill might crash or give confusing error",
      "severity": "critical",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-004",
      "description": "GitHub CLI not installed",
      "category": "state_inconsistency",
      "input": {
        "is_git_repo": true,
        "gh_installed": false,
        "command": "/create-pr"
      },
      "expected_behavior": "Reject with ERROR: 'GitHub CLI not installed' and installation instructions",
      "failure_mode": "Skill might fail with cryptic error",
      "severity": "high",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-005",
      "description": "Not authenticated with GitHub",
      "category": "state_inconsistency",
      "input": {
        "is_git_repo": true,
        "gh_installed": true,
        "gh_authenticated": false,
        "command": "/create-pr"
      },
      "expected_behavior": "Reject with ERROR: 'Run gh auth login first'",
      "failure_mode": "Skill might fail during PR creation step",
      "severity": "high",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-006",
      "description": "Uncommitted changes present",
      "category": "state_inconsistency",
      "input": {
        "current_branch": "feature/test",
        "has_commits": true,
        "uncommitted_changes": true,
        "command": "/create-pr"
      },
      "expected_behavior": "WARN user about uncommitted changes and ask to commit or stash, then proceed OR reject",
      "failure_mode": "Skill might ignore uncommitted changes",
      "severity": "medium",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-007",
      "description": "PR already exists for branch",
      "category": "logic_error",
      "input": {
        "current_branch": "feature/existing",
        "has_commits": true,
        "existing_pr": true,
        "pr_number": 120,
        "command": "/create-pr"
      },
      "expected_behavior": "Detect existing PR and show 'PR already exists: #120' with URL, offer to update",
      "failure_mode": "Skill might error or try to create duplicate PR",
      "severity": "medium",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-008",
      "description": "Invalid base branch specified",
      "category": "type_error",
      "input": {
        "current_branch": "feature/test",
        "has_commits": true,
        "command": "/create-pr --base nonexistent-branch"
      },
      "expected_behavior": "Reject with ERROR: 'Base branch nonexistent-branch does not exist' and list available branches",
      "failure_mode": "Skill might fail during PR creation with confusing error",
      "severity": "medium",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-009",
      "description": "Empty PR title provided",
      "category": "boundary",
      "input": {
        "current_branch": "feature/test",
        "has_commits": true,
        "command": "/create-pr --title \"\""
      },
      "expected_behavior": "Reject empty title OR fallback to generating title from commits",
      "failure_mode": "Skill might create PR with empty title",
      "severity": "medium",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-010",
      "description": "No upstream remote configured",
      "category": "state_inconsistency",
      "input": {
        "current_branch": "feature/test",
        "has_commits": true,
        "has_remote": false,
        "command": "/create-pr"
      },
      "expected_behavior": "Automatically push with -u to create upstream OR ask user to set upstream",
      "failure_mode": "Skill might fail at push step with no recovery",
      "severity": "high",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-011",
      "description": "Network failure during push",
      "category": "logic_error",
      "input": {
        "current_branch": "feature/test",
        "has_commits": true,
        "network_error": "Connection timeout",
        "command": "/create-pr"
      },
      "expected_behavior": "Catch network error, provide helpful message: 'Failed to push: Connection timeout. Check network and retry.'",
      "failure_mode": "Skill might crash or show raw git error",
      "severity": "medium",
      "iteration_added": 1,
      "status": "pending"
    },
    {
      "id": "ADV-1-012",
      "description": "Very long PR title (200+ chars)",
      "category": "boundary",
      "input": {
        "current_branch": "feature/test",
        "has_commits": true,
        "command": "/create-pr --title \"" + "A" * 250 + "\""
      },
      "expected_behavior": "Truncate to GitHub's limit (256 chars) OR reject with 'Title too long (max 256 characters)'",
      "failure_mode": "Skill might send invalid title to GitHub API",
      "severity": "low",
      "iteration_added": 1,
      "status": "pending"
    }
  ],
  "coverage": {
    "state_inconsistency": 5,
    "boundary": 3,
    "logic_error": 3,
    "type_error": 1,
    "ambiguity": 0,
    "injection": 0,
    "hallucination": 0,
    "infinite_loop": 0
  },
  "missing_coverage": ["ambiguity", "injection", "hallucination", "infinite_loop"]
}
